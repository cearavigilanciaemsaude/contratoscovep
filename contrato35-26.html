<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>COVEP</title>

    <!-- ARQUIVO CSS EXTERNO -->
    <link rel="stylesheet" href="estilo.css">
</head>
<body>

    <h1>Contrato 35/2026 - FÓRMULA INFANTIL</h1>

    <div class="navegacao">
        <a href="contratos.html" class="btn-voltar"><i class="fa-solid fa-rotate-left"></i> Contratos </a>
    </div>

    <!-- DADOS PRINCIPAIS DO CONTRATO -->
    <div class="bloco-principal">
        <div class="linha-info">
            <strong>Nº do Contrato:</strong> 35/2026 - FÓRMULA INFANTIL
        </div>
        <div class="linha-info">
            <strong>SACC:</strong> 1412416
        </div>
        <div class="linha-info">
            <strong>Contratado:</strong> SELLENE COMERCIO E REPRESENTACOES LTDA
        </div>
        <div class="linha-info">
            <strong>CNPJ:</strong> 05.329.222/0001-76
        </div>
        <div class="linha-info">
            <strong>Objeto do Contrato:</strong> Aquisições de NUTRIÇÃO (Fórmula infantil)
        </div>
        <div class="status-contrato" id="statusContrato">
    Calculando status do contrato...
</div>
    </div>

    <!-- DADOS COMPLEMENTARES -->
    <table>
        <thead>
            <tr>
                <th>GESTOR</th>
                <th>FISCAL</th>
                <th>DATA INICIO</th>
                <th>DATA DE TERMINO</th>
                <th>PERIODO</th>
                <th>VALOR</th>
                <th>ADITIVO</th>
                <th>APOSTILAMENTO</th>              
                
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>ANA NETA ALVES</td>
                <td>CARLOS GARCIA FILHO</td>
                <td>21/01/2026</td>
                <td>21/07/2026</td>
                <td>6 MESES</td>
                <td>R$ 177.422,64</td>
                <td>NÃO</td>
                <td>NÃO</td>                              
                
            </tr>

            
        </tbody>
    </table>
    <h2>Programação 2026</h2>
    <p> <strong> Parcela 01:</strong> R$ 59.140,88. Quantidade: 1.266.400 gramas (3.166 latas de 400g) para demandas de março e abril. Entrega prevista para 23/02/2026 (2ª feira). 
        NUP 24001.003710/2026-97<br><br>
        <strong> Parcela 02:</strong> R$ 59.140,88. Quantidade: 1.266.400 gramas (3.166 latas de 400g) para demandas de maio e junho. Entrega prevista para 20/04/2026 (2ª feira). 
        NUP a instruir <br><br>
        <strong> Parcela 03:</strong> R$ 59.140,88. Quantidade: 1.266.400 gramas (3.166 latas de 400g) para demandas de julho e agosto. Entrega prevista para 22/06/2026 (2ª feira). 
        NUP a instruir <br>
    
    <script>
    // Função para converter data no formato BR (dd/mm/aaaa) para Date
    function converterDataBR(dataTexto) {
        const partes = dataTexto.split("/");
        return new Date(partes[2], partes[1] - 1, partes[0]);
    }

    // Captura os títulos da tabela
    const ths = document.querySelectorAll("th");
    let indiceInicio, indiceTermino, indicePeriodo;

    ths.forEach((th, index) => {
        const titulo = th.innerText.trim().toUpperCase();

        if (titulo === "DATA INICIO") indiceInicio = index;
        if (titulo === "DATA DE TERMINO") indiceTermino = index;
        if (titulo === "PERIODO") indicePeriodo = index;
    });

    // Captura a primeira linha de dados
    const linha = document.querySelector("tbody tr");
    const colunas = linha.querySelectorAll("td");

    const dataInicioTexto = colunas[indiceInicio].innerText.trim();
    const dataTerminoTexto = colunas[indiceTermino].innerText.trim();

    const dataInicio = converterDataBR(dataInicioTexto);
    const dataTermino = converterDataBR(dataTerminoTexto);

    const hoje = new Date();

    // Zera horas para evitar erro de cálculo
    hoje.setHours(0, 0, 0, 0);
    dataTermino.setHours(0, 0, 0, 0);

    const diferencaMs = dataTermino - hoje;
    const diasRestantes = Math.ceil(diferencaMs / (1000 * 60 * 60 * 24));

    const statusDiv = document.getElementById("statusContrato");

    if (diasRestantes > 0) {
        statusDiv.innerText = `⏳ Faltam ${diasRestantes} dias para o vencimento do contrato.`;
        statusDiv.classList.add("ativo");
    } else if (diasRestantes === 0) {
        statusDiv.innerText = "⚠️ O contrato vence hoje.";
        statusDiv.classList.add("alerta");
    } else {
        statusDiv.innerText = "❌ Contrato vencido.";
        statusDiv.classList.add("vencido");
    }
</script>

</body>
</html>
